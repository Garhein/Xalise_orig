@using Xalise.Web.Areas.Repertoires.Models
@using Xalise.Core.Extensions
@using Xalise.Core.Entite.GED
@using Xalise.Web.Enums
@model ThemeGEDViewModel

<xalise-button size="btn_sm" style="btn_primary" icon="plus" icon-style="regular" title="Ajouter un thème" onclick="ThemeGED_Editer(@((int)eModeOuverture.CREATION), 0);" />

@if (Model.ListeThemes.IsEmpty())
{
    <partial name="_EmptyResults" />
}
else
{
    <table class="table table-hover table-sm table-bordered mt-2">
        <thead class="table-dark">
            <tr>
                <th class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_ACTIONS @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER"></th>
                <th>Libellé</th>
                <th class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_NUM_ORDRE @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER">N°ordre</th>
                <th class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CHECKBOX @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER">Archivé</th>
            </tr>
        </thead>
        <tbody>
            @foreach (ThemeDTO dto in Model.ListeThemes)
            {
                <tr>
                    <td class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_ACTIONS @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER">
                        <xalise-action-link 
                            icon-style="regular" 
                            icon="pen_to_square" 
                            title="Modifier le thème" 
                            onclick="ThemeGED_Editer(@Model.DefinirModeOuverture(dto.EstArchive, dto.ParentID), @dto.ID)"/>

                        @if (!dto.EstInterne)
                        {
                            <xalise-action-link icon-style="regular" icon="trash_can" title="Supprimer le thème" onclick="Theme_Supprimer(@dto.ID)" />

                            @if (dto.EstArchive)
                            {
                                <!--<xalise-action-link icon-style="regular" icon="eye" title="Activer le thème" onclick="Theme_GererArchivage(@dto.ID, false)" />-->
                            }
                            else
                            {
                                <!--<xalise-action-link icon-style="regular" icon="eye_slash" title="Archiver le thème" onclick="Theme_GererArchivage(@dto.ID, true)" />-->
                            }
                        }
                    </td>
                    <td>@dto.ULibelleListeRepertoire</td>
                    <td class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_NUM_ORDRE @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER">@dto.NumOrdre</td>
                    <td class="@HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CHECKBOX @HtmlHelpers.IdentifiantfHtmlElement.CLASS_COL_CENTER">
                        <input asp-for="@dto.EstArchive" class="form-check-input" disabled="disabled" />
                    </td>
                </tr>
            }
        </tbody>
    </table>
}